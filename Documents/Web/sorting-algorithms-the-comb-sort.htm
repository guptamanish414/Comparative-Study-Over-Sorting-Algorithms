<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->
<html class="js video no-maskImage placeholder" lang="en"><!--<![endif]--><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>Sorting Algorithms: The Comb Sort - OJ's rants</title>
  <meta name="author" content="OJ Reeves">

  <link rel="openid.server" href="http://server.myid.net/server">
  <link rel="openid.delegate" href="http://thecolonial.myid.net/">
  <link rel="openid2.local_id" href="http://thecolonial.myid.net/">
  <link rel="openid2.provider" href="http://server.myid.net/server">
  <meta http-equiv="X-XRDS-Location" content="http://thecolonial.myid.net/xrds">

  
  <meta name="description" content="Welcome to this, the third post in the series on sorting algorithms. Next up, we’re going to cover the Comb Sort. Like the Cocktail Sort, the …">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
  <link href="http://feeds.feedburner.com/OjsRants" rel="alternate" title="OJ's rants RSS 2.0" type="application/rss+xml">
  <link rel="canonical" href="http://buffered.io/posts/sorting-algorithms-the-comb-sort">
  <link href="http://buffered.io/favicon.ico" rel="icon">
  <link href="sorting-algorithms-the-comb-sort_files/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  <script async="" src="sorting-algorithms-the-comb-sort_files/cbgapi.loaded_0"></script><script gapi_processed="true" src="sorting-algorithms-the-comb-sort_files/plusone.js" async="" type="text/javascript"></script><script src="sorting-algorithms-the-comb-sort_files/ga.js" async="" type="text/javascript"></script><script src="sorting-algorithms-the-comb-sort_files/jquery_002.js"></script><script src="sorting-algorithms-the-comb-sort_files/jquery.js"></script><script src="sorting-algorithms-the-comb-sort_files/modernizr-2.js" type="text/javascript"></script>
  <script src="sorting-algorithms-the-comb-sort_files/ender.js" type="text/javascript"></script>
  <script src="sorting-algorithms-the-comb-sort_files/octopress.js" type="text/javascript"></script>

  <script type="text/javascript">
    Modernizr.load([
      { load: '//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js' },
      { load: '/javascripts/jquery.lightbox.js', complete: function() {
        $("a[rel^='lightbox']").lightbox();
      } }
    ]);
  </script>

  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="sorting-algorithms-the-comb-sort_files/css_002.css" rel="stylesheet" type="text/css">
<link href="sorting-algorithms-the-comb-sort_files/css.css" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8648787-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


<script src="sorting-algorithms-the-comb-sort_files/embed.js" async="" type="text/javascript"></script><script src="sorting-algorithms-the-comb-sort_files/widgets.js" async="" type="text/javascript"></script><script charset="UTF-8" async="" src="sorting-algorithms-the-comb-sort_files/alfie.js"></script></head>

<body data-twttr-rendered="true">
  <header role="banner"><hgroup>
  <h1><a href="http://buffered.io/">OJ's rants</a></h1>
  
    <h2>It's not about you, it's about the software</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/OjsRants" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input name="q" value="site:buffered.io" type="hidden">
    <input class="search" name="q" results="0" placeholder="Search" type="text">
  </fieldset><fieldset class="mobile-nav"><select><option value="">Navigate…</option><option value="http://buffered.io/">» Blog</option><option value="http://buffered.io/posts/archives">» Archives</option><option value="http://buffered.io/+">» About</option><option value="http://buffered.io/contact">» Contact</option><option selected="selected" value="http://feeds.feedburner.com/OjsRants">» RSS</option></select></fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="http://buffered.io/">Blog</a></li>
  <li><a href="http://buffered.io/posts/archives">Archives</a></li>
  <li><a href="http://buffered.io/+">About</a></li>
  <li><a href="http://buffered.io/contact">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Sorting Algorithms: The Comb Sort</h1>
    
    
      <p class="meta">
        








  



<time datetime="2008-09-14T20:26:00+10:00" pubdate="" data-updated="true">14 Sep 2008</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p><img src="sorting-algorithms-the-comb-sort_files/combsort.jpg" alt="Comb Sort" title="Comb Sort" style="float: left; margin-right: 5px; margin-bottom: 5px;" width="150">Welcome to this, the third post in the series on <a href="http://buffered.io/category/sorting/" title="Sorting @ OJ's rants">sorting</a> algorithms. Next up, we’re going to cover the <strong>Comb Sort</strong>.</p>

<p>Like the <a href="http://buffered.io/posts/sorting-algorithms-the-cocktail-sort/" title="Sorting Algorithms: The Cocktail Sort">Cocktail Sort</a>,
 the Comb Sort isn’t particularly well known. Most people manage to make
 their way through tertiary studies without ever hearing of it. This 
post is designed to change that!</p>

<p>The Comb Sort is another <em>comparison</em> and <em>exchange</em> sort which builds on the idea of the <a href="http://buffered.io/posts/sorting-algorithms-the-bubble-sort/" title="Sorting Algorithms: The Bubble Sort">Bubble Sort</a> and adds a potential optimisation or two.</p>

<p>Make sure you read the articles on the <a href="http://buffered.io/posts/sorting-algorithms-the-bubble-sort/" title="Sorting Algorithms: The Bubble Sort">Bubble Sort</a> and the <a href="http://buffered.io/posts/sorting-algorithms-the-cocktail-sort/" title="Sorting Algorithms: The Cocktail Sort">Cocktail Sort</a> before you read this article. Doing so will make it much easier to understand.</p>

<!--more-->


<p>Right, enough with the introductions, let’s break it down!</p>

<h2>Common Terms</h2>


<ul>
<li><em>Data set</em> - the array or list of items that is to be sorted.</li>
<li><em>n</em> - the number of elements in the <em>data set</em>.</li>
<li><em>Turtle</em> - a name given to small numbers that appear towards the end of a <em>data set</em>. When used in a <strong>Bubble Sort</strong>, small numbers at the end of the set take a very long time to get to the front of the list, and hence are called <em>turtles</em> because of the lack of speed.</li>
<li><em>Hare</em> - a name given to large numbers that appear towards the start of a <em>data set</em>. When used in a <strong>Bubble Sort</strong>, large numbers move to the end of the set very quickly, and hence are called <em>hares</em> due to their high speed.</li>
<li><em>Killing the turtles</em> - a phrase that implies quickly moving <em>turtles</em> to the front of the <em>data set</em>.
</li><li><em>Gap</em> - the size of the gap between areas of the <em>data set</em> that are being sorted during a given iteration of the sort.
</li><li><em>Shrink Factor</em> - a factor which is applied to the <em>gap</em> prior to each iteration to reduce its size.
</li></ul>




<h2>A Bit of Background Information</h2>


<p>The <strong>Comb Sort</strong>, along with the <strong>Cocktail Sort</strong>, was developed as an improvement to the <strong>Bubble Sort</strong> using the idea of <em>killing the turtles</em>. <em>Turtles</em> drastically reduce the efficiency of the <strong>Bubble Sort</strong> and hence are an obvious place to attempt optimisation.</p>

<p>The Bubble Sort algorithm always compares values that are adjacent to each other in the <em>data set</em>. The Comb Sort improves on this by adding a <em>gap</em> which allows non-adjacent numbers to be compared. After each iteration, the <em>gap</em> is reduced by a <em>shrink factor</em> until it reaches the value of <strong>1</strong>. Hence, at the very end, the Comb Sort behaves exactly like the Bubble Sort.</p>

<p>One interesting thing to note about this algorithm is that it’s almost as fast as a Quick Sort!</p>

<h2>The Algorithm</h2>


<p>Each iteration of the algorithm consists of three stages:</p><ol><li>Calculation of the <em>gap</em> value.</li><li>Iterating over the <em>data set</em> comparing each item with the item that is <em>“gap”</em> elements further down the list and swapping them if required.</li><li>Checking to see if the gap value has reached one and no swaps have occurred. If so, then the set has been sorted.</li></ol><p></p>

<h3>1. Calculating the “gap”</h3>


<p>The <em>gap</em>, which is essentially an offset used when comparing 
elements, is something that changes for each iteration. The value needs 
to change in a uniform manner in such a way as to provide optimum 
comparisons during the sorting phases.</p>

<p>Stephen Lacey and Richard Box, who popularised the algorithm, suggested that in each iteration the <em>gap</em> should be reduced by a factor of approximately 1.3 (see the <a href="http://en.wikipedia.org/wiki/Comb_sort" title="Comb sort @ Wikipedia">wikipedia article</a> for more information). Hence, calculation of the <em>gap</em> is as simple as starting with the size of the <em>data set</em> and dividing by a <em>shrink factor</em> of 1.3 each iteration.</p>

<h3>2. Iterating and Swapping</h3>


<p>This phase is the same as the Bubble Sort. The only difference in the Comb Sort is that the items which are compared are <em>i</em> and <em>i + gap</em> as opposed to <em>i</em> and <em>i + 1</em>.</p>

<p>For each iteration, we start at the beginning of the <em>data set</em> and loop until <em>i + gap</em> is greater-than or equal to the size of the <em>data </em>. For each sub-iteration in this loop, we compare <em>i</em> and <em>i + gap</em> and swap the values if required.</p>

<p>At this point the <em>gap is recalculated</em> and we go again.</p>

<h3>3. Terminating the Loop</h3>


<p>When the <em>gap</em> value reaches one, we know that we’re now behaving the same as the Bubble Sort algorithm (since we’re comparing <em>i</em> and <em>i + 1</em>), so we know that if we don’t perform any swaps during the iteration then the set must be sorted.</p>

<h2>The Example</h2>




<p>As per usual we will use the same initial <em>data set</em> that we used for the Bubble Sort and Cocktail Sort to aid in highlighting the differences.</p>

<p>The initial set looks like this:</p>

<p><span class="eg">33 98 74 13 55 20 77 45 64 83</span></p>

<p>We start by setting our <em>gap</em> value to 10, which is the size of the set. We then shrink the gap by the <em>shrink factor</em>, 1.3, which results in the value of 7 (when rounded down).</p>

<p>The first iteration starts at the beginning of the set, comparing the 1st item with the item that is ”<em>gap</em>” elements further up the set (the 8th item). These two items are shown in red:</p>

<p><span class="eg"><b>33</b> 98 74 13 55 20 77 <b>45</b> 64 83</span></p>

<p>33 is less than 45, so no swap is required. We then move to the 2nd item, and compare that item with the 9th item:</p>

<p><span class="eg">33 <b>98</b> 74 13 55 20 77 45 <b>64</b> 83</span></p>

<p>We perform a swap at this point because 98 is bigger than 64. The swap is shown in blue:</p>

<p><span class="eg">33 <i>64</i> 74 13 55 20 77 45 <i>98</i> 83</span></p>

<p>We then move on to compare the 3rd and 10th elements:</p>

<p><span class="eg">33 64 <b>74</b> 13 55 20 77 45 98 <b>83</b></span></p>

<p>Again, no swap is required here as the numbers are in the right order.</p>

<p>At this point we have completed our first iteration as we’ve reached the end of the set. Given that the <em>gap</em> value is not 1, we know we still have more iterations to go. So we need to recalculate our <em>gap</em> value by dividing it again by the <em>shrink factor</em>, resulting in a value of 5 (after rounding down).</p>

<p>We then start another iteration from the beginning of the set, using the <em>gap</em> value of 5 as the offset. We start with the 1st and 6th items:</p>

<p><span class="eg"><b>33</b> 64 74 13 55 <b>20</b> 77 45 98 83</span></p>

<p>Given 33 is bigger than 20, we swap:</p>

<p><span class="eg"><i>20</i> 64 74 13 55 <i>33</i> 77 45 98 83</span></p>

<p>Then we compare the 2nd and 7th items:</p>

<p><span class="eg">20 <b>64</b> 74 13 55 33 <b>77</b> 45 98 83</span></p>

<p>No swap required, move to the 3rd and 8th items:</p>

<p><span class="eg">20 64 <b>74</b> 13 55 33 77 <b>45</b> 98 83</span></p>

<p>Perform the swap since 74 is bigger than 45:</p>

<p><span class="eg">20 64 <i>45</i> 13 55 33 77 <i>74</i> 98 83</span></p>

<p>We then compare the 4th and 9th items:</p>

<p><span class="eg">20 64 45 <b>13</b> 55 33 77 74 <b>98</b> 83</span></p>

<p>No swap required, compare the 5th and 10th items:</p>

<p><span class="eg">20 64 45 13 <b>55</b> 33 77 74 98 <b>83</b></span></p>

<p>Again, no swap required. We’ve hit the end of this next iteration, and since <em>gap</em> doesn’t equal 1, we recalculate (resulting in the value of 3) and go again.</p>

<p>This time I’ll just show a summary of the steps:</p>

<p><span class="eg"><b>20</b> 64 45 <b>13</b> 55 33 77 74 98 83</span>
<span class="eg"><i>13</i> 64 45 <i>20</i> 55 33 77 74 98 83</span>
<span class="eg">13 <b>64</b> 45 20 <b>55</b> 33 77 74 98 83</span>
<span class="eg">13 <i>55</i> 45 20 <i>64</i> 33 77 74 98 83</span>
<span class="eg">13 55 <b>45</b> 20 64 <b>33</b> 77 74 98 83</span>
<span class="eg">13 55 <i>33</i> 20 64 <i>45</i> 77 74 98 83</span>
<span class="eg">13 55 33 <b>20</b> 64 45 <b>77</b> 74 98 83</span>
<span class="eg">13 55 33 20 <b>64</b> 45 77 <b>74</b> 98 83</span>
<span class="eg">13 55 33 20 64 <b>45</b> 77 74 <b>98</b> 83</span>
<span class="eg">13 55 33 20 64 45 <b>77</b> 74 98 <b>83</b></span></p>

<p>Again, we iterate the value of <em>gap</em>, which becomes 2, and we go again:</p>

<p><span class="eg"><b>13</b> 55 <b>33</b> 20 64 45 77 74 98 83</span>
<span class="eg">13 <b>55</b> 33 <b>20</b> 64 45 77 74 98 83</span>
<span class="eg">13 <i>20</i> 33 <i>55</i> 64 45 77 74 98 83</span>
<span class="eg">13 20 <b>33</b> 55 <b>64</b> 45 77 74 98 83</span>
<span class="eg">13 20 33 <b>55</b> 64 <b>45</b> 77 74 98 83</span>
<span class="eg">13 20 33 <i>45</i> 64 <i>55</i> 77 74 98 83</span>
<span class="eg">13 20 33 45 <b>64</b> 55 <b>77</b> 74 98 83</span>
<span class="eg">13 20 33 45 64 <b>55</b> 77 <b>74</b> 98 83</span>
<span class="eg">13 20 33 45 64 55 <b>77</b> 74 <b>98</b> 83</span>
<span class="eg">13 20 33 45 64 55 77 <b>74</b> 98 <b>83</b></span></p>

<p>Finally, we reduce the value of <em>gap</em> one more time, resulting in the value of 1. We’re finally at the <strong>Bubble Sort</strong> stage, and hence the last iteration looks like this:</p>

<p><span class="eg"><b>13</b> <b>20</b> 33 45 64 55 77 74 98 83</span>
<span class="eg">13 <b>20</b> <b>33</b> 45 64 55 77 74 98 83</span>
<span class="eg">13 20 <b>33</b> <b>45</b> 64 55 77 74 98 83</span>
<span class="eg">13 20 33 <b>45</b> <b>64</b> 55 77 74 98 83</span>
<span class="eg">13 20 33 45 <b>64</b> <b>55</b> 77 74 98 83</span>
<span class="eg">13 20 33 45 <i>55</i> <i>64</i> 77 74 98 83</span>
<span class="eg">13 20 33 45 55 <b>64</b> <b>77</b> 74 98 83</span>
<span class="eg">13 20 33 45 55 64 <b>77</b> <b>74</b> 98 83</span>
<span class="eg">13 20 33 45 55 64 <i>74</i> <i>77</i> 98 83</span>
<span class="eg">13 20 33 45 55 64 74 77 <b>98</b> <b>83</b></span>
<span class="eg">13 20 33 45 55 64 74 77 <i>83</i> <i>98</i></span>
<span class="eg"><u>13</u> <u>20</u> <u>33</u> <u>45</u> <u>55</u> <u>64</u> <u>74</u> <u>77</u> <u>83</u> <u>98</u></span></p>

<p>At this point we know, due to observation, that the list is sorted. 
Unfortunately, the algorithm is yet to know. It looks at the value of <em>gap</em> and sees that it is set to 1, but during the last iteration there were swaps – so the code will iterate again.</p>

<p>At the end of this iteration, given that there were no swaps, it will know that the list is sorted and the code will terminate.</p>

<h2>The Implementation</h2>


<p>Here is a sample implementation written in <a href="http://en.wikipedia.org/wiki/C_Sharp" title="C Sharp">C#</a>. It is heavily commented in the hope that it will aid in understanding how the algorithm works:</p>

<figure class="code"> <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
</pre></td><td class="code"><pre><code class="csharp"><span class="line"><span class="c1">/// &lt;summary&gt;</span>
</span><span class="line"><span class="c1">/// The implementation of the standard comb sort algorithm which sorts</span>
</span><span class="line"><span class="c1">/// an array of integers.</span>
</span><span class="line"><span class="c1">/// &lt;/summary&gt;</span>
</span><span class="line"><span class="c1">/// &lt;param name="dataSet"&gt;Reference to the dataset that is to be soroted.&lt;/param&gt;</span>
</span><span class="line"><span class="k">static</span> <span class="k">void</span> <span class="nf">CombSort</span><span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">dataSet</span><span class="p">)</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="c1">// start by using the length/size of the set as the gap.</span>
</span><span class="line">    <span class="kt">int</span> <span class="n">gap</span> <span class="p">=</span> <span class="n">dataSet</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="c1">// loop indefinately.</span>
</span><span class="line">    <span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span>
</span><span class="line">    <span class="p">{</span>
</span><span class="line">        <span class="c1">// update the gap value so that it shrinks</span>
</span><span class="line">        <span class="c1">// towards 1.</span>
</span><span class="line">        <span class="k">if</span> <span class="p">(</span><span class="n">gap</span> <span class="p">&gt;</span> <span class="m">1</span><span class="p">)</span>
</span><span class="line">        <span class="p">{</span>
</span><span class="line">            <span class="n">gap</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)((</span><span class="kt">double</span><span class="p">)</span><span class="n">gap</span> <span class="p">/</span> <span class="n">SHRINK_FACTOR</span><span class="p">);</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">
</span><span class="line">        <span class="c1">// do the comb sort with the current gap</span>
</span><span class="line">        <span class="kt">bool</span> <span class="n">swapped</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
</span><span class="line">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">+</span> <span class="n">gap</span> <span class="p">&lt;</span> <span class="n">dataSet</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
</span><span class="line">        <span class="p">{</span>
</span><span class="line">            <span class="k">if</span> <span class="p">(</span><span class="n">dataSet</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">&gt;</span> <span class="n">dataSet</span><span class="p">[</span><span class="n">i</span> <span class="p">+</span> <span class="n">gap</span><span class="p">])</span>
</span><span class="line">            <span class="p">{</span>
</span><span class="line">                <span class="n">Swap</span><span class="p">(</span><span class="n">dataSet</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="p">+</span> <span class="n">gap</span><span class="p">);</span>
</span><span class="line">                <span class="n">swapped</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
</span><span class="line">            <span class="p">}</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">
</span><span class="line">        <span class="c1">// if we're down to a gap of 1, and we haven't swapped</span>
</span><span class="line">        <span class="c1">// anything, then we're sorted.</span>
</span><span class="line">        <span class="k">if</span> <span class="p">(</span><span class="n">gap</span> <span class="p">==</span> <span class="m">1</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="n">swapped</span><span class="p">)</span>
</span><span class="line">        <span class="p">{</span>
</span><span class="line">            <span class="k">break</span><span class="p">;</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></tbody></table></div></figure>




<h2>The Complexity</h2>


<p>This is quite surprising. Despite being based on the idea of a <a href="http://buffered.io/posts/sorting-algorithms-the-bubble-sort/" title="Sorting Algorithms: The Bubble Sort">Bubble Sort</a>
 the time complexity is just O(n log n), and space complexity for 
in-place sorting is O(1). Amazing for such a simple sorting algorithm!</p>

<h2>A Note on Performance</h2>


<p>What I’m about to say is almost a direct rip-off of Wikipedia ;) But at least I’m being honest!</p>

<p>When you use a <em>shrink factor</em> of 1.3, as recommended, it turns out that there are only 3 ways for the gap sizes to reduce to 1. They are:</p>

<p><span class="eg">1. - 9, 6, 4, 3, 2, 1</span>
<span class="eg">2. - 10, 7, 5, 3, 2, 1</span>
<span class="eg">3. - 11, 8, 6, 4, 3, 2, 1</span></p>

<p>According to Wikipedia, it turns out that the 3rd option is the only one which manages to <em>kill all turtles</em> before the <em>gap</em> becomes 1. I haven’t been able to find anything that backs this up though.</p>

<p>Assuming that this is true, we can create a modified version of the <strong>Comb Sort</strong> which has this extra little check:</p>

<figure class="code"> <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="csharp"><span class="line"><span class="k">if</span><span class="p">(</span><span class="n">gap</span> <span class="p">==</span> <span class="m">9</span> <span class="p">||</span> <span class="n">gap</span> <span class="p">==</span> <span class="m">10</span><span class="p">)</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="n">gap</span> <span class="p">=</span> <span class="m">11</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>This is a little hack which makes sure that we get the third option before we reduce the <em>gap</em> to 1. Of course, this would only have an effect on sets of data which have more than 11 elements.</p>

<p><a name="CombSortBitBucket"></a></p>

<h2>Other Implementations</h2>


<p>I’m slowly gathering a collection of implementations of all the 
sorting algorithms, including the ones listed above, that I’m covering 
in this series and posting them up on <a href="http://www.bitbucket.org/OJ/sorting/overview/" title="Sorting @ OJ's BitBucket">BitBucket</a>. The Comb Sort implementations can be found <a href="http://www.bitbucket.org/OJ/sorting/src/b26f42ecdbe0/03-CombSort/" title="CombSort @ OJ's BitBucket">here</a>.</p>

<p><em>Note: You’ll need <a href="http://www.selenic.com/mercurial/" title="Mercurial">Mercurial</a> if you want to pull directly from the repository, otherwise you’ll have to copy and paste from the web.</em></p>

<h2>References and Other Information</h2>


<ol>
<li><a href="http://en.wikipedia.org/wiki/Comb_sort" title="Comb sort">Wikipedia - Comb sort</a></li>
</ol>


<p>Next up, we’ll be looking at the <a href="http://buffered.io/posts/sorting-algorithms-the-gnome-sort/" title="Sorting Algorithms: The Gnome Sort">Gnome Sort</a>.</p>

<h2>Disclaimer</h2>


<p>I’m no expert, nor an authority. The post above is based on my 
experience and a bit of research. If you find something wrong with 
anything I’ve said please let me know. Comments and feedback are greatly
 appreciated.</p>

<p><em>Note: For those reading this article in an RSS reader, you may 
find the colours do not appear in the examples properly. For some reason
 the feed is stripping out some of the formatting. I will do my best to 
fix this up soon.</em></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">OJ Reeves</span></span>

      








  



<time datetime="2008-09-14T20:26:00+10:00" pubdate="" data-updated="true">14 Sep 2008</time>
      

<span class="categories">
  
    <a class="category" href="http://buffered.io/categories/algorithms/">Algorithms</a>, <a class="category" href="http://buffered.io/categories/software-development/">Software Development</a>, <a class="category" href="http://buffered.io/categories/sorting/">Sorting</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <iframe data-twttr-rendered="true" title="Twitter Tweet Button" style="width: 109px; height: 20px;" class="twitter-share-button twitter-count-horizontal" src="sorting-algorithms-the-comb-sort_files/tweet_button.htm" allowtransparency="true" frameborder="0" scrolling="no"></iframe>
  
  
  <div id="___plusone_0" style="height: 20px; width: 90px; display: inline-block; text-indent: 0px; margin: 0px; padding: 0px; background: none repeat scroll 0% 0% transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline;"><iframe title="+1" data-gapiattached="true" allowtransparency="true" src="sorting-algorithms-the-comb-sort_files/fastbutton.htm" name="I0_1363349019642" id="I0_1363349019642" vspace="0" tabindex="0" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" marginwidth="0" marginheight="0" hspace="0" frameborder="0" scrolling="no" width="100%"></iframe></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="http://buffered.io/posts/wpf-shader-fx-on-codeplex/" title="Previous Post: WPF Shader FX on Codeplex">« WPF Shader FX on Codeplex</a>
      
      
        <a class="basic-alignment right" href="http://buffered.io/posts/sorting-algorithms-the-gnome-sort/" title="next Post: Sorting Algorithms: The Gnome Sort">Sorting Algorithms: The Gnome Sort »</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><iframe verticalscrolling="no" horizontalscrolling="no" src="sorting-algorithms-the-comb-sort_files/a.htm" style="width: 100%; border: medium none; overflow: hidden; height: 4434px;" role="application" allowtransparency="true" data-disqus-uid="1" id="dsq1" frameborder="0" scrolling="no" width="100%"></iframe><iframe src="sorting-algorithms-the-comb-sort_files/client.htm" style="width: 100%; border: medium none; overflow: hidden; display: none;" role="application" allowtransparency="true" data-disqus-uid="3" id="dsq3" frameborder="0" width="100%"></iframe><iframe style="width: 789px; border: medium none; overflow: hidden; top: 0px; min-width: 789px; max-width: 789px; position: fixed; max-height: 29px; min-height: 29px; height: 29px; display: none;" role="application" allowtransparency="true" data-disqus-uid="-indicator-north" id="dsq-indicator-north" frameborder="0" scrolling="no"></iframe><iframe style="width: 789px; border: medium none; overflow: hidden; bottom: 0px; min-width: 789px; max-width: 789px; position: fixed; max-height: 29px; min-height: 29px; height: 29px; display: none;" role="application" allowtransparency="true" data-disqus-uid="-indicator-south" id="dsq-indicator-south" frameborder="0" scrolling="no"></iframe></div>
  </section>

</div>

<aside class="sidebar thirds">
  
    <section class="first odd">
  <h1>OJ on the Web</h1>
  <ul id="about_me">
    <li class="post">
      <a href="http://buffered.io/+" title="About OJ">About me</a>
    </li>
    <li class="post">
      <a href="http://buffered.io/key.asc" title="PGP Key">PGP Key</a>
    </li>
    <li class="post">
      <a href="http://functional.io/" title="Functional IO">Functional IO</a>
    </li>
    <li class="post">
      <a href="http://twitter.com/TheColonial" title="OJ @ Twitter">Twitter</a>
    </li>
    <li class="post">
      <a href="http://github.com/OJ/" title="OJ @ Github">Github</a>
    </li>
    <li class="post">
      <a href="http://bitbucket.org/OJ/" title="OJ @ Bitbucket">Bitbucket</a>
    </li>
    <li class="post">
      <a href="http://stackoverflow.com/users/611/oj" title="OJ @ SO">StackOverflow</a>
    </li>
    <li class="post">
      <a href="https://coderwall.com/oj">Coderwall<br><img alt="Endorse OJ on Coderwall" src="sorting-algorithms-the-comb-sort_files/endorsecount.png"></a>
    </li>
  </ul>
  <iframe src="sorting-algorithms-the-comb-sort_files/OJ.htm" style="border: 0;height: 142px;width: 200px;overflow: hidden;" frameborder="0"></iframe>
</section>
<section class="even">
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="http://buffered.io/posts/irssi-and-sasl-on-osx/">Irssi and SASL on OSX</a>
      </li>
    
      <li class="post">
        <a href="http://buffered.io/posts/xss-flaws-via-mvc-model-binding-and-request.querystring-inconsistencies/">XSS Flaws via MVC Model Binding and Request.QueryString Inconsistencies</a>
      </li>
    
      <li class="post">
        <a href="http://buffered.io/posts/stepping-down/">Stepping Down</a>
      </li>
    
      <li class="post">
        <a href="http://buffered.io/posts/meaning/">Meaning</a>
      </li>
    
      <li class="post">
        <a href="http://buffered.io/posts/webmachine-erlydtl-and-riak-part-5/">Webmachine, ErlyDTL and Riak - Part 5</a>
      </li>
    
  </ul>
</section>

<section class="odd">
  <h1>Latest Tweets</h1>
  <ul id="tweets"><li><p><a href="http://twitter.com/TheColonial/status/312430107434307584">6h</a>Hey <a href="http://twitter.com/Telstra">@Telstra</a> your telephone voice system is a frustrating pile of junk.</p></li><li><p><a href="http://twitter.com/TheColonial/status/312396316821057536">9h</a>So <a href="http://twitter.com/tsantero">@tsantero</a> I see you've just met <a href="http://twitter.com/bryceverdier">@bryceverdier</a> ! The world is indeed small :)</p></li><li><p><a href="http://twitter.com/TheColonial/status/312330712944631808">13h</a>Awesome, got my copy of Ghost in the Wires by <a href="http://twitter.com/kevinmitnick">@kevinmitnick</a>. Looking forward to diving in this one.</p></li><li><p><a href="http://twitter.com/TheColonial/status/312145223239233536">1d</a>Sick of the bullshit <a href="http://twitter.com/qantasairways">@qantasairways</a></p></li></ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("TheColonial", 4, false);
    });
  </script>
  <script src="sorting-algorithms-the-comb-sort_files/twitter.js" type="text/javascript"> </script>
  
    <iframe data-twttr-rendered="true" title="Twitter Follow Button" style="width: 139px; height: 20px;" class="twitter-follow-button twitter-follow-button" src="sorting-algorithms-the-comb-sort_files/follow_button.htm" allowtransparency="true" frameborder="0" scrolling="no"></iframe>
  
</section>

<section class="first even">
  <h1>Series</h1>
  <ul id="series">
    <li class="series"><a href="http://buffered.io/series/project-euler/">Project Euler (11)</a></li>
<li class="series"><a href="http://buffered.io/series/web-development-with-erlang/">Web Development with Erlang (5)</a></li>

  </ul>
</section>
<section class="odd">
  <h1>Categories</h1>
  <ul id="categories">
    <li class="category"><a href="http://buffered.io/categories/asm/">ASM (3)</a></li>
<li class="category"><a href="http://buffered.io/categories/asp-net/">ASP.NET (4)</a></li>
<li class="category"><a href="http://buffered.io/categories/agile/">Agile (1)</a></li>
<li class="category"><a href="http://buffered.io/categories/algorithms/">Algorithms (6)</a></li>
<li class="category"><a href="http://buffered.io/categories/apple/">Apple (3)</a></li>
<li class="category"><a href="http://buffered.io/categories/backbonejs/">BackboneJS (1)</a></li>
<li class="category"><a href="http://buffered.io/categories/being-in-the-industry/">Being in the Industry (29)</a></li>
<li class="category"><a href="http://buffered.io/categories/blogging/">Blogging (15)</a></li>
<li class="category"><a href="http://buffered.io/categories/bootstrap/">Bootstrap (1)</a></li>
<li class="category"><a href="http://buffered.io/categories/c-/">C# (15)</a></li>
<li class="category"><a href="http://buffered.io/categories/clr/">CLR (3)</a></li>
<li class="category"><a href="http://buffered.io/categories/challenges/">Challenges (7)</a></li>
<li class="category"><a href="http://buffered.io/categories/databases/">Databases (6)</a></li>
<li class="category"><a href="http://buffered.io/categories/digital-rights/">Digital Rights (7)</a></li>
<li class="category"><a href="http://buffered.io/categories/erlang/">Erlang (8)</a></li>
<li class="category"><a href="http://buffered.io/categories/erlydtl/">ErlyDTL (2)</a></li>
<li class="category"><a href="http://buffered.io/categories/f-/">F# (4)</a></li>
<li class="category"><a href="http://buffered.io/categories/fail/">Fail (2)</a></li>
<li class="category"><a href="http://buffered.io/categories/food/">Food (1)</a></li>
<li class="category"><a href="http://buffered.io/categories/freeware/">Freeware (9)</a></li>
<li class="category"><a href="http://buffered.io/categories/functional-programming/">Functional Programming (29)</a></li>
<li class="category"><a href="http://buffered.io/categories/funny/">Funny (9)</a></li>
<li class="category"><a href="http://buffered.io/categories/games/">Games (5)</a></li>
<li class="category"><a href="http://buffered.io/categories/google/">Google (10)</a></li>
<li class="category"><a href="http://buffered.io/categories/guest-posts/">Guest posts (1)</a></li>
<li class="category"><a href="http://buffered.io/categories/howto/">HOWTO (18)</a></li>
<li class="category"><a href="http://buffered.io/categories/hardware/">Hardware (9)</a></li>
<li class="category"><a href="http://buffered.io/categories/haskell/">Haskell (20)</a></li>
<li class="category"><a href="http://buffered.io/categories/life/">Life (2)</a></li>
<li class="category"><a href="http://buffered.io/categories/linux/">Linux (10)</a></li>
<li class="category"><a href="http://buffered.io/categories/mac-os/">Mac OS (3)</a></li>
<li class="category"><a href="http://buffered.io/categories/merb/">Merb (1)</a></li>
<li class="category"><a href="http://buffered.io/categories/mercurial/">Mercurial (3)</a></li>
<li class="category"><a href="http://buffered.io/categories/microsoft/">Microsoft (18)</a></li>
<li class="category"><a href="http://buffered.io/categories/miscellaneous/">Miscellaneous (56)</a></li>
<li class="category"><a href="http://buffered.io/categories/mono/">Mono (2)</a></li>
<li class="category"><a href="http://buffered.io/categories/networks/">Networks (2)</a></li>
<li class="category"><a href="http://buffered.io/categories/nosql/">NoSQL (3)</a></li>
<li class="category"><a href="http://buffered.io/categories/oauth/">OAuth (1)</a></li>
<li class="category"><a href="http://buffered.io/categories/open-source/">Open Source (2)</a></li>
<li class="category"><a href="http://buffered.io/categories/privacy/">Privacy (3)</a></li>
<li class="category"><a href="http://buffered.io/categories/productivity/">Productivity (1)</a></li>
<li class="category"><a href="http://buffered.io/categories/project-euler/">Project Euler (11)</a></li>
<li class="category"><a href="http://buffered.io/categories/protip/">Protip (1)</a></li>
<li class="category"><a href="http://buffered.io/categories/rce/">RCE (4)</a></li>
<li class="category"><a href="http://buffered.io/categories/riak/">Riak (7)</a></li>
<li class="category"><a href="http://buffered.io/categories/ruby-on-rails/">Ruby on Rails (1)</a></li>
<li class="category"><a href="http://buffered.io/categories/screencasts/">Screencasts (1)</a></li>
<li class="category"><a href="http://buffered.io/categories/security/">Security (12)</a></li>
<li class="category"><a href="http://buffered.io/categories/series/">Series (1)</a></li>
<li class="category"><a href="http://buffered.io/categories/shortcuts/">Shortcuts (4)</a></li>
<li class="category"><a href="http://buffered.io/categories/software/">Software (31)</a></li>
<li class="category"><a href="http://buffered.io/categories/software-development/">Software Development (66)</a></li>
<li class="category"><a href="http://buffered.io/categories/sorting/">Sorting (5)</a></li>
<li class="category"><a href="http://buffered.io/categories/technology/">Technology (40)</a></li>
<li class="category"><a href="http://buffered.io/categories/testing/">Testing (1)</a></li>
<li class="category"><a href="http://buffered.io/categories/tips-tricks/">Tips/Tricks (12)</a></li>
<li class="category"><a href="http://buffered.io/categories/twitter/">Twitter (2)</a></li>
<li class="category"><a href="http://buffered.io/categories/wpf/">WPF (1)</a></li>
<li class="category"><a href="http://buffered.io/categories/wtf/">WTF (20)</a></li>
<li class="category"><a href="http://buffered.io/categories/webmachine/">Webmachine (7)</a></li>
<li class="category"><a href="http://buffered.io/categories/windows/">Windows (12)</a></li>
<li class="category"><a href="http://buffered.io/categories/xss/">XSS (1)</a></li>

  </ul>
</section>

  
</aside>


    <span class="toggle-sidebar"></span></div>
  </div>
  <footer role="contentinfo"><p>
Copyright © 2013 -
<span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Blog content for OJ's rants</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://buffered.io/+" property="cc:attributionName" rel="cc:attributionURL">OJ Reeves</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a> -
  <span class="credit">Powered by <a href="http://octopress.org/">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'ojsrants';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://buffered.io/posts/sorting-algorithms-the-comb-sort/';
        var disqus_url = 'http://buffered.io/posts/sorting-algorithms-the-comb-sort/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>







</body></html>